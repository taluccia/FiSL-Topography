---
title: "Field data"
author: "Anna Talucci"
date: '2022-06-21'
output: html_document
---


# Overview

# Packages

```{r}
library(tidyverse)
library(sp)
library(sf)
library(ids)
```

# Data

```{r}
field = read.csv("../data/Field/AK_CA_Burned_Plot_Data_1983_2016.csv")
```

```{r}
head(field)
```
```{r}
field %>% dplyr::select(ecoregion_name_l2) %>% unique()
```

# Filter by region

```{r}
nwt_field = field %>% filter(ecoregion_name_l2 %in% c("Taiga Plains", "Taiga Shield"))
```

```{r}
ak_field = field %>% filter(ecoregion_name_l2 %in% c("Alaska Boreal Interior", "Boreal Cordillera"))
```

```{r}
sk_field = field %>% filter(ecoregion_name_l2 %in% c("Boreal Plains", "Softwood Shield"))
```

```{r}
sk_field
```

```{r}
nwt_plains = field %>% filter(ecoregion_name_l2 == "Taiga Plains")
nwt_shield = field %>% filter(ecoregion_name_l2 == "Taiga Shield")
```
# Range of Latitude and Longitude

## NWT
```{r}
min(nwt_field$latitude)
max(nwt_field$latitude)
```

```{r}
min(nwt_field$longitude)
max(nwt_field$longitude)
```

```{r}
min(nwt_plains$latitude)
max(nwt_plains$latitude)
```

```{r}
min(nwt_plains$longitude)
max(nwt_plains$longitude)
```
```{r}
min(nwt_shield$latitude)
max(nwt_shield$latitude)
```

```{r}
min(nwt_shield$longitude)
max(nwt_shield$longitude)
```

# AK
```{r}
min(nwt_field$latitude)
max(nwt_field$latitude)
```

```{r}
min(ak_field$longitude)
max(ak_field$longitude)
```

# SK
```{r}
min(sk_field$latitude)
max(sk_field$latitude)
```

```{r}
min(sk_field$longitude)
max(sk_field$longitude)
```
```{r}
nrow(nwt_shield)
```


```{r}
nwt_shield %>% dplyr::select(project_id) %>% n_distinct()
```

# Add Unique ID

```{r eval=FALSE, include=FALSE}
nwt_shield %>% 
  mutate(UniqueId = random_id(n= 190, bytes = 4)) %>%
  dplyr::select(UniqueId, IDobj:geometry)
```

# Write to csv
```{r eval=FALSE, include=FALSE}
write.csv(nwt_field, "../outputs/FieldCSV/Field1983-2016/nwt_field.csv", row.names=FALSE)
write.csv(ak_field, "../outputs/FieldCSV/Field1983-2016/ak_field.csv", row.names=FALSE)
write.csv(sk_field, "../outputs/FieldCSV/Field1983-2016/sk_field.csv", row.names=FALSE)
```

```{r eval=FALSE, include=FALSE}
write.csv(nwt_shield, "../outputs/FieldCSV/Field1983-2016/nwt_shield.csv", row.names=FALSE)
```

# Convert to point shapefile with WGS 84 

## SK
```{r}
sk_field

```

```{r}
sk_field2 = sk_field %>% 
  dplyr::select(project_id:longitude) %>%
  rename(proj_name = project_name, ecoregion = ecoregion_name_l2) %>%
  st_as_sf(.,coords=c("longitude", "latitude"),crs=4326)
```

```{r}
head(sk_field2)
```

```{r}
plot(st_geometry(sk_field2))
```

### Write to shapefile

```{r eval=FALSE, include=FALSE}
st_write(sk_field2, "../outputs/FieldPoints/Field1983-2016/SKPoints1983-2016.shp", driver="ESRI Shapefile")
```


## NWT 
```{r}
nwt_field2 = nwt_field %>% 
  dplyr::select(project_id:longitude) %>%
  rename(proj_name = project_name, ecoregion = ecoregion_name_l2) %>%
  st_as_sf(.,coords=c("longitude", "latitude"),crs=4326)
```

```{r}
head(nwt_field2)
```

```{r}
plot(st_geometry(nwt_field2))
```

## Write to shapefile

```{r eval=FALSE, include=FALSE}
st_write(nwt_field2, "../outputs/FieldPoints/Field1983-2016/NWTPoints1983-2016.shp", driver="ESRI Shapefile")
```


## NWT Shield
For NWT Shield points for testing topo variable calculations
```{r}
head(nwt_shield) 
```

```{r}
nwt_shield2 = nwt_shield %>% 
  dplyr::select(project_id:longitude) %>%
  rename(proj_name = project_name, ecoregion = ecoregion_name_l2) %>%
  st_as_sf(.,coords=c("longitude", "latitude"),crs=4326)
```

```{r}
head(nwt_shield2)
```

```{r}
plot(st_geometry(nwt_shield2))
```

## Write to shapefile

```{r eval=FALSE, include=FALSE}
st_write(nwt_shield2, "../outputs/FieldPoints/Field1983-2016/NWTshieldPoints.shp", driver="ESRI Shapefile")
```


## AK 
For AK points for testing topo variable calculations and working on First Landscape
```{r}
head(ak_field) 
```

```{r}
ak_field2 = ak_field %>% 
  dplyr::select(project_id:longitude) %>%
  rename(proj_name = project_name, ecoregion = ecoregion_name_l2) %>%
  st_as_sf(.,coords=c("longitude", "latitude"),crs=4326)
```


```{r}
ak_field2 %>% filter(proj_name=="JFSP_Boby")
```
```{r}
ak_only = ak_field2 %>% filter(!proj_name=="CAN_deGroot")
```

```{r}
plot(st_geometry(ak_field2))
```
### Min/Max Lat/long
```{r}
min(ak_field2$latitude)
max(ak_field2$latitude)
```

```{r}
min(ak_field2$longitude)
max(ak_field2$longitude)
```

## Write to shapefile

```{r eval=FALSE, include=FALSE}
st_write(ak_field2, "../outputs/FieldPoints/Field1983-2016/AKYukonPoints.shp", driver="ESRI Shapefile")
```

```{r eval=FALSE, include=FALSE}
st_write(ak_only, "../outputs/FieldPoints/Field1983-2016/AKPoints.shp", driver="ESRI Shapefile")
```